{% assign lang = site.active_lang %}
{% assign lang_data = site.language_data %}
{% assign active_lang_info = lang_data[lang] %}
<nav>
    <div class="nav-container">
        <a href="/{{site.baseurl}}" class="logo">    {{ site.author }}</a>
        <ul>
        {% assign pages_list = site.pages %}
        {% assign written = "" | split: '' %}
        {% for node in pages_list %}
        {% if written contains node.title %}
        {% continue %}
        {% endif %}
        {% if node.title != null %}
        {% if node.layout == "page" %}
            <li>
                <a class="sidebar-nav-item{% if page.url == node.url %} active{% endif %}" 
                    href="{{ site.baseurl }}{{ node.url }}">{{ node.header }}</a>
            </li>
          {% endif %}
          {% assign written = written | push: node.title %}
        {% endif %}
      {% endfor %}
        </ul>

        <div class="lang-switcher">

            <button class="lang-toggle">
                {{ active_lang_info.name }}
            </button>

            <ul class="lang-list">
                {% for tongue in site.languages %}
                {% assign lang_key = tongue %}
                {% assign lang_info = lang_data[lang_key] %}

                {% unless lang_key == active_lang_key %}
                <li>
                    <a class="lang-item" {% static_href
                        %}href="{% if lang_key == site.default_lang %}{{site.baseurl}}{{page.url}}{% else %}{{site.baseurl}}/{{ lang_key }}{{page.url}}{% endif %}"
                        {% endstatic_href %}>
                        {{ lang_info.name }}
                    </a>
                </li>
                {% endunless %}
                {% endfor %}
            </ul>
        </div>
    </div>
</nav>